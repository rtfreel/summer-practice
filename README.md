# Java Summer Practice
Repository for Java Summer Practice

##
Для запуска приложений на машине нужно установить:
- Java 11
- Maven последней версии
- Docker (для того, чтобы попробовать создать image приложения) 
##

### Запустить приложение из командной строки
В корневой директории приложения:

`mvn spring-boot:run`

или

`mvn clean install` - выполнить в корневой папке приложения (book-store или discount)

`cd target` - перейти в папку target

`java -jar book-store-0.0.1-SNAPSHOT.jar` - в папке target выполнить команду


### Ссылки на актуатор (информация о приложении)
http://localhost:8080/actuator

http://localhost:8080/actuator/health

### Получить список книг

http://localhost:8080/book

### Ссылки на документацию API в Swagger
http://localhost:8080/v2/api-docs

http://localhost:8080/v3/api-docs

http://localhost:8080/swagger-ui/

### Ссылка на консоль базы данных H2
http://localhost:8080/h2-console

### Получить информацию о скидке

http://localhost:8081/discount

### Собрать image для Docker 
В корневой папке приложения:
`mvn spring-boot:build-image`

### Запустить контейнер на основе image
`docker run -p 8081:8081 -d book-discount:0.0.1-SNAPSHOT`

## Дополнительное задание
1. Доработать сервис Discount, чтобы он возвращал скидку для групп книг:
   - Сервис должен возвращать список из групп и скидок. 
   - Группа может обозначаться набором букв и цифр длинной до 10 символов.
   - Предусмотреть применение полученных скидок перед отдачей списка книг из сервиса BookStore.
   - Предусмотреть ситуацию, когда для некоторых групп скидки не предусмотрены.
   - Предусмотреть ситуацию, когда сервис скидок не доступен.
2. Доработать API для получения информации о книге по id ("/book/{id}"). Информация должна возвращаться из базы данных. 
3. Добавить в базу данных пользователей, которые могут оставлять отзывы о книгах.
4. Добавить API, который по id книги выдает все отзывы на неё из базы данных.

# Выполнено:

## По пунктам:
1. Сервис Discount:
   - Теперь он работает с собственной базой данных, где указаны скидки в формате (группа, процент).
   - Группа определяется жанром, которой принадлежит книга.
   - Скидка применяется автоматически при запросе книг.
   - Если сервис недоступен, или скидка не предусмотрена - книга отображается по стандартной цене.
2. По id возвращается книга сразу по скидке.
3. База работает на новом API, где хранятся отзывы.
4. API с отзывами работает на порту 8082.

## Ссылки:

### Получить информацию о книге по id
http://localhost:8080/book/{id}

### Получить информацию о скидке на определённую группу книг (жанр)
http://localhost:8081/discount/{жанр}

### Получить все отзывы
http://localhost:8082/review

### Получить все отзывы на книгу по id
http://localhost:8082/review/{id}
